<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Abhishek POS System Customer</title>
    <link rel="stylesheet" href="../assets/normalize.css">
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/main-style.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/fonts/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
    <meta content="width=device-width initial-scale=1" name="viewport">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">

</head>
<body style="background-color: #1C2E4C">
<script src="../assets/js/bootstrap.js"></script>
<script src="../assets/js/bootstrap.bundle.js"></script>

<!--------------navbar------------->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" style="box-shadow: 1px 2px 3px 1px rgba(0, 0, 0, 0.76);">
    <div class="container-fluid">
        <img src="../assets/img/my-logo.png" style="width: 150px; height: 50px">
        <a class="navbar-brand" href="#" style="margin-top: 5px; margin-left: 5px; color: red; font-size: 2rem;">POS SYSTEM</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <button class="btn btn-outline-danger ms-auto" type="submit"><i class="bi bi-box-arrow-right" style="margin-right: 10px"></i>Log out</button>
        </div>
    </div>
</nav>
<!--------------navbar------------->

<!--------------slider------------->

<div class="offcanvas offcanvas-start bg-dark text-white position-fixed" data-bs-backdrop="static" tabindex="-1" id="staticBackdrop" aria-labelledby="staticBackdropLabel" style="transform: none; width: 200px; top: 80px; visibility: visible !important; font-family: 'Michroma', sans-serif;">
    <div class="offcanvas-body p-0">
        <nav class="navbar-dark">
            <ul class="navbar-nav">
                <li>
                    <div class="text-muted fw-bold px-lg-4" style="font-size: 2rem">Menu</div><br>
                </li>
                <li>
                    <hr class="table-group-divider">
                </li>
                <li>
                    <a href="../index.html" class="nav-link px-2">
                        <span class="me-3" style="font-size: 1.5rem;"><i class="bi bi-speedometer2"></i></span>
                        <span style="font-size: 1.5rem;">Dash Board</span>
                    </a>
                </li>
                <li class="my-1">
                    <hr class="table-group-divider">
                </li>

                <li>
                    <a href="#" class="nav-link px-2">
                        <span class="me-3" style="font-size: 1.5rem;"><i class="bi bi-people-fill"></i></span>
                        <span style="font-size: 1.5rem;">Customers</span>
                    </a>
                </li>
                <li class="my-1">
                    <hr class="table-group-divider">
                </li>

                <li>
                    <a href="../pages/Items.html" class="nav-link px-2">
                        <span class="me-3" style="font-size: 1.5rem;"><i class="bi bi-stack"></i></span>
                        <span style="font-size: 1.5rem;">Items</span>
                    </a>
                </li>
                <li class="my-1">
                    <hr class="table-group-divider">
                </li>

                <li>
                    <a href="../pages/Orders.html" class="nav-link px-2">
                        <span class="me-3" style="font-size: 1.5rem;"><i class="bi bi-cart4"></i></span>
                        <span style="font-size: 1.5rem;">Orders</span>
                    </a>
                </li>
                <li class="my-1">
                    <hr class="table-group-divider">
                </li>

                <li>
                    <a href="../pages/Others.html" class="nav-link px-2">
                        <span class="me-3" style="font-size: 1.5rem;"><i class="bi bi-book-fill"></i></span>
                        <span style="font-size: 1.5rem;">Others</span>
                    </a>
                </li>

            </ul>
        </nav>
    </div>
</div>
<!--------------slider------------->

<main>

    <section>
        <!--    header-->
        <div style="display: inline-block; color: white;" class="border-5">
            <i class="fa-solid fa-users-between-lines" style="font-size: 28px;"></i>
            <h2 style="margin-left: 15px; display: inline-block;">Customers</h2>
            <!--        new customer button-->
            <!-- Button trigger modal -->
            <button class="btn btn-lg btn-success position-absolute end-0 shadow-lg" data-bs-target="#saveCustomerLabel" data-bs-toggle="modal" type="button">
                <i class="bi bi-person-plus-fill"></i> Add New Customer
            </button>

            <!-- Modal -->
            <div aria-hidden="true" aria-labelledby="saveCustomerLabel" class="modal fade" id="saveCustomerLabel" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header bg-dark">
                            <h5 class="modal-title">Save New Customer Details</h5>
                            <button aria-label="Close" class="btn-close bg-danger" data-bs-dismiss="modal" type="button"></button>
                        </div>
                        <div class="modal-body bg-dark">
                            <section>
                                <div class="mb-3">
                                    <label class="form-label" for="txtCustomerID">Customer ID</label>
                                    <input class="form-control" id="txtCustomerID" type="text">
                                </div>
                                <div class="mb-3 shadow-none">
                                    <label class="form-label" for="txtCustomerName">Customer Name</label>
                                    <input class="form-control" id="txtCustomerName" multiple type="text">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="txtCustomerAddress">Customer Address</label>
                                    <input class="form-control" id="txtCustomerAddress" type="text">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label" for="txtCustomerContact">Customer Contact</label>
                                    <input class="form-control form-control-sm" id="txtCustomerContact" type="number">
                                </div>

                            </section>



                        </div>
                        <div class="modal-footer bg-dark">
                            <button class="btn btn-danger" data-bs-dismiss="modal" type="button">Cancel</button>
                            <button class="btn btn-success" id="btnSaveCustomer" type="button">Save changes</button>
                        </div>
                    </div>
                </div>
            </div>


            <!--        new customer button-->
        </div><br><br>


        <div class="col-12 d-flex gap-5">

<!--            search section-->
            <div class="col-4 bg-success shadow-none ">
                <div class="d-flex bg-dark shadow-none" role="">
                    <input class="form-control me-2" id="txtSearch" type="" placeholder="Search Customer by ID/Name" aria-label="Search">
                    <button class="btn btn-outline-light bg-dark" id="btnSearch" type="submit"><i class="bi bi-search"></i></button>
                </div>
                <div class="card text-bg-success mb-4 col-12 shadow-none" style="max-width: 25rem; top:0.5rem;">
                    <div class="card-body">
                        <form>
                            <div class="row mb-1">
                                <label for="txtSearchName"  class="col-sm-3 col-form-label">Name</label>
                                <div class="col-sm-8 shadow-none">
                                    <input type="email" class="form-control" id="txtSearchName">
                                </div>
                            </div>
                        </form>
                        <form>
                            <div class="row mb-1">
                                <label for="txtSearchAddress" class="col-sm-3 col-form-label">Address</label>
                                <div class="col-sm-8 shadow-none">
                                    <input type="email" class="form-control" id="txtSearchAddress">
                                </div>
                            </div>
                        </form>
                        <form>
                            <div class="row mb-1">
                                <label for="txtSearchContact" class="col-sm-3 col-form-label">Contact</label>
                                <div class="col-sm-8 shadow-none">
                                    <input type="email" class="form-control" id="txtSearchContact">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

<!--            update and delete section-->
            <div class="col-7 ms-auto shadow-none" style="max-height: fit-content;">

                <div class="card text-bg-primary mb-0 shadow-none" style="max-width: 40rem;">
                    <div class="card-body shadow-none">
                        <h5 class="card-title text-danger fw-bold text-center">Update or Delete Customer</h5>
                        <hr class="table-group-divider bg-black">
                    </div>

<!--                text section-->

                    <form class="row g-2" style="margin-top: -30px;">
<!--                        id-->
                        <div class="col-md-4 shadow-none px-3">
                            <label for="inputState" class="form-label">ID</label>
                            <select id="inputState" class="form-select text-black">
                                <option selected id="comboID">Choose...</option>
                                <option>...</option>
                            </select>
                        </div>
<!--                        id-->

<!--                        name-->
                        <div class="col-md-7 shadow-none">
                            <label for="updateName" class="form-label">Name</label>
                            <input type="text" class="form-control" id="updateName" placeholder="Mr.Fernando">
                        </div>
<!--                        name-->

<!--                        address-->
                        <div class="col-7 px-3">
                            <label for="updateAddress" class="form-label">Address</label>
                            <input type="text" class="form-control" id="updateAddress" placeholder="Apartment, studio, or floor">
                        </div>
<!--                        adders-->

<!--                        contact-->
                        <div class="col-md-4">
                            <label for="updateContact" class="form-label">Contact Number</label>
                            <input type="text" class="form-control" id="updateContact" placeholder="+94-xxx xxx xx">
                        </div>
<!--                        contact-->

<!--                        button section-->
                        <div class="d-flex col-4 gap-2 ms-auto">

<!--                            update button-->
                            <button class="btn btn-primary bg-warning" data-bs-target="#exampleModal" data-bs-toggle="modal" type="button">
                                <i class="bi bi-arrow-clockwise"></i> Update
                            </button>
                            <!-- Modal -->
                            <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModal" tabindex="-1">
                                <div class="modal-dialog bg-danger">
                                    <div class="modal-content bg-danger">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Update Customer Details</h5>
                                            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                                        </div>
                                        <div class="modal-body">
                                            <section>
                                                <div>
                                                    <p>Are You Sure..?<br> This Changes Added to the database....</p>
                                                </div>
                                            </section>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Cancel</button>
                                            <button class="btn btn-primary" type="button">Save changes</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
<!--                            update button-->

<!--                            delete button-->
                            <button class="btn btn-primary bg-danger" data-bs-target="#exampleModal2" data-bs-toggle="modal" type="button">
                                <i class="bi bi-trash3-fill"></i> Delete
                            </button>
                            <!-- Modal -->
                            <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModal2" tabindex="-1">
                                <div class="modal-dialog bg-danger">
                                    <div class="modal-content bg-danger">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="example">Delete Customer Details</h5>
                                            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                                        </div>
                                        <div class="modal-body">
                                            <section>
                                                <div>
                                                    <p>Are You Sure..?<br> This Changes Added to the database....</p>
                                                </div>
                                            </section>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Cancel</button>
                                            <button class="btn btn-primary" type="button">Save changes</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
<!--                            delete button-->
                        </div>
<!--                        button section-->
                    </form>
<!--                    text section-->
                </div>
            </div>
<!--            update and delete section-->
        </div><br><br>

        <div class="col-12" style="height:180px; overflow-y: scroll">
            <table class="table table-bordered">
                <thead class="bg-danger text-white">
                <tr>
                    <th>Customer ID</th>
                    <th>Customer Name</th>
                    <th>Customer Address</th>
                    <th>Customer Contact</th>
                </tr>
                </thead>
                <tbody id="tblCustomer">

                    <tr class="bg-dark text-light">
                        <td>C001</td>
                        <td>Amal</td>
                        <td>Galle</td>
                        <td>045646566</td>
                    </tr>

                    <tr class="bg-dark text-light">
                        <td>C002</td>
                        <td>Nimal</td>
                        <td>Panadura</td>
                        <td>02453122</td>
                    </tr>

                    <tr class="bg-dark text-light">
                        <td>C003</td>
                        <td>Kamal</td>
                        <td>Kalutara</td>
                        <td>054646548</td>
                    </tr>
                </tbody>
            </table>
        </div>


    </section>
</main>

<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/jquery-3.6.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.34/dist/sweetalert2.all.min.js"></script>

<script>
    var customers = [];
    $("#btnSaveCustomer").click(function () {

        let customerID = $("#txtCustomerID").val();
        let customerName = $("#txtCustomerName").val();
        let customerAddress = $("#txtCustomerAddress").val();
        let customerContact = $("#txtCustomerContact").val();

        var customer = {
            id: customerID,
            name: customerName,
            address: customerAddress,
            contact: customerContact
        };

        // console.log(customer.id+ " "+ customer.name+ " " + customer.address+ " " + customer.contact)
        customers.push(customer);
        console.log(customers);
        loadAllCustomers();
        bindRowDetails();
    });

    function loadAllCustomers(){
        $("#tblCustomer").empty();
        for(var customer of customers){
            console.log(customer);

            var row= "<tr class='bg-dark text-light'><td>"+customer.id+"</td><td>"+customer.name+"</td><td>"+customer.address+"</td><td>"+customer.contact+"</td></tr>";

            $("#tblCustomer").append(row);
        }
    }

    $("#btnSearch").click(function () {
        var id = $("#txtSearch").val();

        for(var customer of customers){
            if (id === customer.id || id === customer.name){
                console.log(id +" "+ customer.name +" "+ customer.address +" "+ customer.contact);
                $("#txtSearchName").val(customer.name);
                $("#txtSearchAddress").val(customer.address);
                $("#txtSearchContact").val(customer.contact);
            } else {
                // Swal.fire({
                //     icon: 'error',
                //     title: 'Oops...',
                //     text: 'ID or Name Not at the database, Try again!',
                // });
            }
        }

    });

    function bindRowDetails() {
        $('#tblCustomer>tr').click(function () {
            let id = $(this).children(":eq(0)").text();
            let name = $(this).children(":eq(1)").text();
            let address = $(this).children(":eq(2)").text();
            let contact = $(this).children(":eq(3)").text();
            console.log(id+" "+name+" "+address+" "+contact);

            $("#inputState").val(id);
            $("#updateName").val(name);
            $("#updateAddress").val(address);
            $("#updateContact").val(contact);
        });
    }

    $("#txtCustomerID,#txtCustomerName,#txtCustomerAddress,#txtCustomerContact").on('keydown', function (event) {
        if (event.key == 'Tab') {
            event.preventDefault();
        }
    });

    $("#txtCustomerID").on('keydown', function (event) {
       if (event.key == 'Enter') {
           $("#txtCustomerName").focus();
       }
    });

    $("#txtCustomerName").on('keydown', function (event) {
        if (event.key == 'Enter') {
            $("#txtCustomerAddress").focus();
        }
    });

    $("#txtCustomerAddress").on('keydown', function (event) {
        if (event.key == 'Enter') {
            $("#txtCustomerContact").focus();
        }
    });

    $("#txtCustomerContact").on('keydown', function (event) {
        if (event.key == 'Enter') {
            $("#btnSaveCustomer").focus();
        }
    });

    function searchCustomer(cusID) {
        for (let customer of customers) {
            if (customer.id == cusID) {
                return customer
            }
        }
        return null;
    }

    $("#txtSearch").on('keyup', function (event) {
        if (event.code == "Enter") {
            let typedID = $("#txtSearch").val();
            searchCustomer(typedID);
        }
    })



</script>

</body>
</html>